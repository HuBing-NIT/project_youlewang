"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Login=void 0;var _createClass=function(){function t(e,n){for(var o=0;o<n.length;o++){var t=n[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),_module_tool=require("./module_tool.js"),_module_sha=require("./module_sha1.js");function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var Login=function(){function e(){_classCallCheck(this,e),this.yzm=(0,_module_tool.$)(".set_yzm"),this.btn=(0,_module_tool.$)(".login-btn"),this.oInp=(0,_module_tool.$)(".inp_yz","all"),this.re_pass=(0,_module_tool.$)(".re_pass")}return _createClass(e,[{key:"init",value:function(){console.log(this.oInp);var e=this;this.yzm.innerHTML=(0,_module_tool.yzm)(),this.yzm.style.background="rgba("+(0,_module_tool.rannum)(0,255)+","+(0,_module_tool.rannum)(0,255)+","+(0,_module_tool.rannum)(0,255)+",0.5)",this.yzm.onclick=function(){this.innerHTML=(0,_module_tool.yzm)(),this.style.background="rgba("+(0,_module_tool.rannum)(0,255)+","+(0,_module_tool.rannum)(0,255)+","+(0,_module_tool.rannum)(0,255)+",0.5)"},this.btn.onclick=function(){e.login_yz()},this.user_inp(),this.pass_inp()}},{key:"login_yz",value:function(){var n=this;this.oInp[0].value||(this.oInp[0].nextElementSibling.style.display="block",this.oInp[0].nextElementSibling.innerHTML="请输入用户名",this.oInp[0].style.border="1px solid red"),this.oInp[1].value||(this.oInp[1].nextElementSibling.style.display="block",this.oInp[1].nextElementSibling.innerHTML="请输入密码",this.oInp[1].style.border="1px solid red"),this.oInp[0].value&&this.oInp[1]&&this.yzm.innerHTML==this.oInp[2].value&&(0,_module_tool.ajax)({url:"../php/login.php",type:"post",data:{user:this.oInp[0].value,pass:(0,_module_sha.hex_sha1)(this.oInp[1].value)}}).then(function(e){1==e?(console.log(n.re_pass),console.log(n.re_pass.checked),n.re_pass.checked?_module_tool.jstool.addcookie("username",n.oInp[0].value):_module_tool.jstool.delcookie("username"),alert("登录成功"),location.href="index.html"):(n.oInp[0].nextElementSibling.innerHTML="用户名或密码错误",n.oInp[0].nextElementSibling.style.display="block",n.oInp[0].style.border="1px solid red")})}},{key:"user_inp",value:function(){this.oInp[0].oninput=function(){""!=this.value?(this.nextElementSibling.style.display="none",this.style.border="1px solid #cacaca"):(this.nextElementSibling.style.display="block",this.nextElementSibling.innerHTML="请输入用户名",this.style.border="1px solid red")}}},{key:"pass_inp",value:function(){this.oInp[1].oninput=function(){""!=this.value?(this.nextElementSibling.style.display="none",this.style.border="1px solid #cacaca"):(this.nextElementSibling.style.display="block",this.nextElementSibling.innerHTML="请输入密码",this.style.border="1px solid red")}}}]),e}();exports.Login=Login;